<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site Performance Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;600&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Google Sans', 'Roboto', Arial, sans-serif;
            background-color: #fafafa;
            color: #202124;
            line-height: 1.4;
        }

        /* News Ticker Header Styles */
        .header {
            background: linear-gradient(90deg, #1a73e8 0%, #4285f4 50%, #1a73e8 100%);
            color: white;
            height: 40px;
            overflow: hidden;
            position: relative;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .ticker-wrapper {
            position: relative;
            height: 100%;
            display: flex;
            align-items: center;
        }

        .ticker-label {
            background: #ea4335;
            color: white;
            padding: 0 16px;
            height: 100%;
            display: flex;
            align-items: center;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            flex-shrink: 0;
            position: relative;
        }

        .ticker-label::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid #ea4335;
            border-top: 20px solid transparent;
            border-bottom: 20px solid transparent;
        }

        .ticker-content {
            flex: 1;
            height: 100%;
            overflow: hidden;
            position: relative;
        }

        .ticker-scroll {
            display: flex;
            align-items: center;
            height: 100%;
            animation: scroll-left 30s linear infinite;
            white-space: nowrap;
        }

        @keyframes scroll-left {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .ticker-item {
            display: inline-flex;
            align-items: center;
            margin-right: 40px;
            font-size: 13px;
            font-weight: 400;
            white-space: nowrap;
        }

        .ticker-separator {
            display: inline-block;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
            margin: 0 16px;
        }

        .ticker-icon {
            width: 14px;
            height: 14px;
            margin-right: 6px;
            opacity: 0.9;
        }

        .dashboard-title {
            font-weight: 600;
            color: #fff;
        }

        .loading {
            opacity: 0.7;
            font-style: italic;
        }

        /* Main Content */
        .main-container {
            position: relative;
            width: 100%;
            min-height: calc(100vh - 80px);
            display: flex;
            flex-direction: column;
        }

        .dashboard-container {
            flex: 1;
            position: relative;
            width: 100%;
            background: white;
            border-radius: 8px;
            margin: 16px;
            box-shadow: 0 1px 6px rgba(32,33,36,0.1);
            overflow: hidden;
        }

        .dashboard-iframe {
            width: 100%;
            height: calc(100vh - 140px);
            min-height: 600px;
            border: none;
            display: block;
        }

        /* Footer - News ticker style safety reminder with enhanced mobile coverage */
        .footer {
            position: absolute;
            bottom: 0;
            right: 0;
            left: 0;
            background: linear-gradient(90deg, #34a853 0%, #4caf50 50%, #34a853 100%);
            color: white;
            height: 60px;
            overflow: hidden;
            z-index: 1001;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.15);
        }

        /* Additional overlay to guarantee coverage */
        .footer::before {
            content: '';
            position: absolute;
            bottom: 60px;
            right: 0;
            width: 100%;
            height: 40px;
            background: rgba(255, 255, 255, 0.98);
            z-index: 1000;
            pointer-events: none;
        }

        .footer-ticker-wrapper {
            position: relative;
            height: 100%;
            display: flex;
            align-items: center;
        }

        .footer-ticker-label {
            background: #ea4335;
            color: white;
            padding: 0 16px;
            height: 100%;
            display: flex;
            align-items: center;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            flex-shrink: 0;
            position: relative;
        }

        .footer-ticker-label::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid #ea4335;
            border-top: 30px solid transparent;
            border-bottom: 30px solid transparent;
        }

        .footer-ticker-content {
            flex: 1;
            height: 100%;
            overflow: hidden;
            position: relative;
        }

        .footer-ticker-scroll {
            display: flex;
            align-items: center;
            height: 100%;
            animation: scroll-left-footer 35s linear infinite;
            white-space: nowrap;
        }

        @keyframes scroll-left-footer {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .footer-ticker-item {
            display: inline-flex;
            align-items: center;
            margin-right: 50px;
            font-size: 13px;
            font-weight: 400;
            white-space: nowrap;
        }

        .footer-ticker-separator {
            display: inline-block;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
            margin: 0 20px;
        }

        .footer-ticker-icon {
            width: 14px;
            height: 14px;
            margin-right: 6px;
            opacity: 0.9;
        }

        .safety-highlight {
            font-weight: 600;
            color: #fff;
        }

        /* Enhanced coverage overlay to ensure privacy text is hidden */
        /* Removed - using larger footer instead */

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header {
                height: 36px;
            }

            .ticker-label {
                padding: 0 12px;
                font-size: 11px;
            }

            .ticker-item {
                font-size: 12px;
                margin-right: 30px;
            }

            .ticker-icon {
                width: 12px;
                height: 12px;
            }

            .dashboard-container {
                margin: 8px;
                border-radius: 0;
            }

            .dashboard-iframe {
                height: calc(100vh - 120px);
                min-height: 500px;
            }

            .footer {
                height: 40px;
            }

            .footer-ticker-label::after {
                border-top: 27px solid transparent;
                border-bottom: 27px solid transparent;
            }

            .footer-ticker-label {
                padding: 0 12px;
                font-size: 11px;
            }

            .footer-ticker-item {
                font-size: 12px;
                margin-right: 35px;
            }

            .footer-ticker-icon {
                width: 12px;
                height: 12px;
            }

            .footer-ticker-scroll {
                animation-duration: 30s;
            }

            /* Removed blank overlay cards for mobile */
        }

        @media (max-width: 480px) {
            .header {
                height: 32px;
                padding-top: env(safe-area-inset-top);
            }

            .ticker-label {
                padding: 0 8px;
                font-size: 10px;
            }

            .ticker-item {
                font-size: 11px;
                margin-right: 20px;
            }

            .ticker-scroll {
                animation-duration: 25s;
            }

            .footer {
                height: 75px;
                padding-bottom: env(safe-area-inset-bottom);
            }

            .footer-ticker-wrapper {
                height: 50px;
            }

            .footer-ticker-label {
                padding: 0 8px;
                font-size: 10px;
            }

            .footer-ticker-item {
                font-size: 11px;
                margin-right: 25px;
            }

            .footer-ticker-scroll {
                animation-duration: 25s;
            }

            .dashboard-container {
                margin-bottom: calc(8px + 75px);
            }

            .dashboard-iframe {
                height: calc(100vh - 130px - env(safe-area-inset-top) - env(safe-area-inset-bottom));
                min-height: 350px;
            }
        }

        /* Smooth transitions */
        .header-info,
        .safety-suggestions {
            transition: opacity 0.3s ease;
        }

        /* Removed blank overlay cards - using larger footer instead */

        @media (max-width: 768px) {
            .main-container::after {
                width: 100%;
                height: 60px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="ticker-wrapper">
            <div class="ticker-label">LIVE</div>
            <div class="ticker-content">
                <div class="ticker-scroll">
                    <div class="ticker-item">
                        <svg class="ticker-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                        Hyderabad, India
                    </div>
                    <span class="ticker-separator"></span>
                    <div class="ticker-item">
                        <svg class="ticker-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <span id="current-time" class="loading">Loading...</span>
                    </div>
                    <span class="ticker-separator"></span>
                    <div class="ticker-item">
                        <svg class="ticker-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"/>
                        </svg>
                        <span id="weather" class="loading">Loading...</span>
                    </div>
                    <span class="ticker-separator"></span>
                    <div class="ticker-item dashboard-title">
                        ðŸ“Š Site Performance Dashboard
                    </div>
                    <span class="ticker-separator"></span>
                    <div class="ticker-item">
                        Real-time Analytics & Monitoring
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="main-container">
        <div class="dashboard-container">
            <iframe 
                class="dashboard-iframe"
                src="https://lookerstudio.google.com/embed/reporting/28da2412-8785-49f3-ad95-d9216c642e83/page/p_c5r3npwcvd" 
                frameborder="0" 
                style="border:0" 
                allowfullscreen 
                sandbox="allow-storage-access-by-user-activation allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox">
            </iframe>
        </div>
        
        <footer class="footer">
            <div class="footer-ticker-wrapper">
                <div class="footer-ticker-label">SAFETY</div>
                <div class="footer-ticker-content">
                    <div class="footer-ticker-scroll">
                        <div class="footer-ticker-item">
                            <svg class="footer-ticker-icon" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.66 16,12.56 16,13.5V16.5C16,17.66 15.16,18.5 14,18.5H10C8.84,18.5 8,17.66 8,16.5V13.5C8,12.56 8.6,11.66 9.2,11.5V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,10V11.5H13.5V10C13.5,8.7 12.8,8.2 12,8.2Z"/>
                            </svg>
                            <span id="safety-text-1" class="safety-highlight">Always ensure proper scaffolding setup and regular inspections</span>
                        </div>
                        <span class="footer-ticker-separator"></span>
                        <div class="footer-ticker-item">
                            <svg class="footer-ticker-icon" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9A3,3 0 0,0 9,12M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>
                            </svg>
                            Use certified equipment and maintain three points of contact
                        </div>
                        <span class="footer-ticker-separator"></span>
                        <div class="footer-ticker-item">
                            <svg class="footer-ticker-icon" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17,8C8,10 5.9,16.17 3.82,21.34L5.71,22L6.66,19.7C7.14,19.87 7.64,20 8,20C19,20 22,3 22,3C21,5 14,5.25 9,6.25C4,7.25 2,11.5 2,13.5C2,15.5 3.75,17.25 3.75,17.25C7,8 17,8 17,8Z"/>
                            </svg>
                            Conduct daily safety briefings before work begins
                        </div>
                        <span class="footer-ticker-separator"></span>
                        <div class="footer-ticker-item">
                            <svg class="footer-ticker-icon" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12,2L13.09,8.26L22,9L13.09,9.74L12,16L10.91,9.74L2,9L10.91,8.26L12,2M6.5,12.5L9.5,15.5L7.58,16.92L6.5,12.5M17.5,12.5L14.5,15.5L16.42,16.92L17.5,12.5Z"/>
                            </svg>
                            Check weather conditions and verify load capacities
                        </div>
                        <span class="footer-ticker-separator"></span>
                        <div class="footer-ticker-item">
                            <svg class="footer-ticker-icon" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.46,13.97L5.82,21L12,17.27Z"/>
                            </svg>
                            Maintain proper documentation and emergency procedures
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </main>

    <script>
        // Update current time for IST (India Standard Time)
        function updateTime() {
            const now = new Date();
            const istTime = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Kolkata"}));
            const timeString = istTime.toLocaleTimeString('en-IN', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            });
            document.getElementById('current-time').textContent = `${timeString} IST`;
        }

        // Get Hyderabad weather specifically
        async function getHyderabadWeather() {
            try {
                // Hyderabad coordinates
                const lat = 17.3850;
                const lon = 78.4867;
                
                // Get weather for Hyderabad using Open-Meteo
                const weatherResponse = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&timezone=Asia/Kolkata&temperature_unit=celsius`);
                const weatherData = await weatherResponse.json();
                
                const temp = Math.round(weatherData.current.temperature_2m);
                const weatherCode = weatherData.current.weather_code;
                const weatherDescription = getWeatherDescription(weatherCode);
                
                document.getElementById('weather').textContent = `${temp}Â°C, ${weatherDescription}`;
                
            } catch (error) {
                console.error('Weather error:', error);
                document.getElementById('weather').textContent = 'Weather Unavailable';
            }
        }

        // Convert weather codes to descriptions
        function getWeatherDescription(code) {
            const weatherCodes = {
                0: 'Clear Sky',
                1: 'Mainly Clear',
                2: 'Partly Cloudy',
                3: 'Overcast',
                45: 'Foggy',
                48: 'Rime Fog',
                51: 'Light Drizzle',
                53: 'Moderate Drizzle',
                55: 'Dense Drizzle',
                61: 'Slight Rain',
                63: 'Moderate Rain',
                65: 'Heavy Rain',
                71: 'Slight Snow',
                73: 'Moderate Snow',
                75: 'Heavy Snow',
                77: 'Snow Grains',
                80: 'Slight Showers',
                81: 'Moderate Showers',
                82: 'Violent Showers',
                85: 'Slight Snow Showers',
                86: 'Heavy Snow Showers',
                95: 'Thunderstorm',
                96: 'Thunderstorm with Hail',
                99: 'Heavy Thunderstorm'
            };
            
            return weatherCodes[code] || 'Unknown';
        }

        // Generate dynamic safety text for footer ticker (no longer needed)
        // Footer now has static comprehensive safety messages

        // Initialize page
        function init() {
            updateTime();
            getHyderabadWeather();
            
            // Update time every second
            setInterval(updateTime, 1000);
            
            // Update weather every 10 minutes
            setInterval(getHyderabadWeather, 600000);
        }

        // Start when page loads
        window.addEventListener('load', init);

        // Handle iframe loading and ensure footer coverage
        window.addEventListener('load', () => {
            const iframe = document.querySelector('.dashboard-iframe');
            iframe.addEventListener('load', () => {
                // Ensure footer stays on top after iframe loads
                setTimeout(() => {
                    const footer = document.querySelector('.footer');
                    footer.style.zIndex = '999';
                }, 500);
            });
        });
    </script>
</body>
</html>
